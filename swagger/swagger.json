{
  "openapi": "3.0.3",
  "info": {
    "title": "San3a API",
    "description": "API documentation for San3a application",
    "version": "1.0.0",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "https://san3a-api.vercel.app/api",
      "description": "Production server"
    },
    {
      "url": "http://localhost:3000/api",
      "description": "Development server"
    }
  ],
  "tags": [
    {
      "name": "San3a",
      "description": "San3a API Documentation"
    },
    {
      "name": "Authentication",
      "description": "Login, signup, password management"
    },
    {
      "name": "Admin",
      "description": "Administrative analytics and operations"
    },
    {
      "name": "User",
      "description": "User management and profile"
    },
    {
      "name": "Category",
      "description": "Service categories"
    },
    {
      "name": "Post",
      "description": "Service request posts"
    },
    {
      "name": "Offer",
      "description": "Technician offers on posts"
    },
    {
      "name": "Review",
      "description": "Service reviews"
    },
    {
      "name": "TechService",
      "description": "Technician service listings"
    },
    {
      "name": "PastWork",
      "description": "Technician past work portfolio"
    },
    {
      "name": "Chat",
      "description": "Conversations and messages"
    },
    {
      "name": "Chatbot",
      "description": "AI assistance endpoints"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter your bearer token in the format **Bearer <token>**"
      }
    },
    "schemas": {
      "AddAvailabilityRequest": {
        "type": "object",
        "required": [
          "availabity"
        ],
        "properties": {
          "availabity": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "day",
                "slots"
              ],
              "properties": {
                "day": {
                  "type": "string",
                  "format": "date"
                },
                "slots": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AvailabilitySlot"
                  },
                  "minItems": 1
                }
              }
            },
            "minItems": 1
          }
        }
      },
      "AuthSuccessResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "token": {
            "type": "string",
            "example": "jwt_token_here"
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "AvailabilitySlot": {
        "type": "object",
        "properties": {
          "start": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2}$",
            "example": "09:00"
          },
          "end": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2}$",
            "example": "17:00"
          },
          "isBooked": {
            "type": "boolean",
            "example": false
          }
        },
        "required": [
          "start",
          "end"
        ]
      },
      "Availabity": {
        "type": "object",
        "description": "Availability day document with slots",
        "properties": {
          "_id": {
            "type": "string"
          },
          "day": {
            "type": "string",
            "format": "date-time",
            "example": "2025-11-21T00:00:00.000Z"
          },
          "slots": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "start": {
                  "type": "string",
                  "example": "09:00"
                },
                "end": {
                  "type": "string",
                  "example": "11:00"
                },
                "isBooked": {
                  "type": "boolean",
                  "example": false
                }
              },
              "required": [
                "start",
                "end",
                "isBooked"
              ]
            }
          }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "nameAr": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "descriptionAr": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "url": {
                  "type": "string"
                },
                "public_id": {
                  "type": "string"
                }
              }
            }
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        }
      },
      "CategoryListResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "total": {
            "type": "number"
          },
          "page": {
            "type": "number"
          },
          "limit": {
            "type": "number"
          },
          "totalPages": {
            "type": "number"
          },
          "results": {
            "type": "number"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Category"
            }
          }
        }
      },
      "CategoryResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/Category"
          }
        }
      },
      "ChatbotConversation": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "conversationId": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "model",
              "assistant"
            ]
          },
          "text": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ChatbotRequest": {
        "type": "object",
        "required": [
          "conversationId",
          "userMessage"
        ],
        "properties": {
          "conversationId": {
            "type": "string"
          },
          "userMessage": {
            "type": "string"
          }
        }
      },
      "ChatbotResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "response": {
                "type": "string"
              },
              "category": {
                "type": "string"
              }
            }
          }
        }
      },
      "ChatUserSummary": {
        "type": "object",
        "description": "User subset returned in chat population (name & image)",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "example": "Yousef Mohamed"
          },
          "image": {
            "type": "object",
            "properties": {
              "public_id": {
                "type": "string"
              },
              "url": {
                "type": "string"
              }
            }
          }
        }
      },
      "Conversation": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "participants": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatUserSummary"
            }
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Message"
            }
          }
        }
      },
      "ConversationListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Conversation"
        }
      },
      "CreateCategoryRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "nameAr": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "descriptionAr": {
            "type": "string"
          },
          "image": {
            "type": "string",
            "format": "binary"
          }
        },
        "required": [
          "name",
          "nameAr"
        ]
      },
      "CreateConversationRequest": {
        "type": "object",
        "required": [
          "participants"
        ],
        "properties": {
          "participants": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "minItems": 2
          }
        }
      },
      "CreateOfferRequest": {
        "type": "object",
        "required": [
          "price",
          "message"
        ],
        "properties": {
          "price": {
            "type": "number",
            "minimum": 0
          },
          "message": {
            "type": "string"
          }
        },
        "description": "Technician offer on a post; post & technician inferred from route/user"
      },
      "CreatePastWorkRequest": {
        "type": "object",
        "required": [
          "title",
          "description",
          "images",
          "userId"
        ],
        "properties": {
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 50
          },
          "description": {
            "type": "string",
            "minLength": 8,
            "maxLength": 500
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            },
            "minItems": 1,
            "maxItems": 10
          },
          "userId": {
            "type": "string"
          },
          "location": {
            "$ref": "#/components/schemas/Point"
          },
          "dateCompleted": {
            "type": "string",
            "format": "date-time"
          },
          "customerName": {
            "type": "string"
          }
        }
      },
      "CreatePostRequest": {
        "type": "object",
        "required": [
          "user",
          "images",
          "title",
          "description",
          "category",
          "location"
        ],
        "properties": {
          "user": {
            "type": "string",
            "description": "Injected from authenticated user"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            },
            "minItems": 1
          },
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "minLength": 5
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 10
          },
          "category": {
            "type": "string"
          },
          "location": {
            "$ref": "#/components/schemas/Point"
          },
          "status": {
            "type": "string",
            "enum": [
              "open",
              "in-progress",
              "completed"
            ],
            "default": "open"
          },
          "offersCount": {
            "type": "integer",
            "default": 0
          },
          "selectedOffer": {
            "type": [
              "string",
              "null"
            ],
            "nullable": true
          }
        }
      },
      "CreateReviewRequest": {
        "type": "object",
        "required": [
          "rating",
          "review",
          "techService",
          "user"
        ],
        "properties": {
          "rating": {
            "type": "number",
            "minimum": 0,
            "maximum": 5
          },
          "review": {
            "type": "string"
          },
          "techService": {
            "type": "string"
          },
          "user": {
            "type": "string"
          }
        }
      },
      "CreateTechServiceRequest": {
        "type": "object",
        "required": [
          "title",
          "description",
          "price",
          "images",
          "category"
        ],
        "properties": {
          "title": {
            "type": "string",
            "minLength": 3,
            "maxLength": 30
          },
          "description": {
            "type": "string",
            "minLength": 5,
            "maxLength": 300
          },
          "price": {
            "type": "number",
            "minimum": 0
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            },
            "minItems": 1
          },
          "category": {
            "type": "string"
          }
        }
      },
      "DeleteMeResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "DeleteMessageResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "DidMakeOfferResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "didMakeOffer": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "ForgotPasswordRequest": {
        "type": "object",
        "required": [
          "email"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "yousef@example.com"
          }
        }
      },
      "GetMyPastWorkResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PastWork"
            }
          }
        }
      },
      "GetUserByIdResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "ImageObject": {
        "type": "object",
        "properties": {
          "public_id": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "required": [
          "public_id",
          "url"
        ]
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "yousef@example.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "StrongP@ss123"
          }
        }
      },
      "Message": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "conversation": {
            "type": "string"
          },
          "author": {
            "$ref": "#/components/schemas/ChatUserSummary"
          },
          "content": {
            "type": "string"
          },
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "image"
            ],
            "example": "text"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          }
        }
      },
      "MessageListResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Message"
        }
      },
      "Offer": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "post": {
            "type": "string"
          },
          "technician": {
            "$ref": "#/components/schemas/User"
          },
          "price": {
            "type": "number",
            "minimum": 0
          },
          "message": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "OfferListResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "total": {
            "type": "integer"
          },
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "totalPages": {
            "type": "integer"
          },
          "results": {
            "type": "integer"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Offer"
            }
          }
        }
      },
      "OfferResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/Offer"
          }
        }
      },
      "PastWork": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          },
          "userId": {
            "type": "string"
          },
          "location": {
            "$ref": "#/components/schemas/Point"
          },
          "dateCompleted": {
            "type": "string",
            "format": "date-time"
          },
          "customerName": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PastWorkResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/PastWork"
          }
        }
      },
      "Point": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "example": "Point"
          },
          "coordinates": {
            "type": "array",
            "items": {
              "type": "number"
            },
            "example": [
              31.2357,
              30.0444
            ]
          },
          "address": {
            "type": "string"
          }
        },
        "required": [
          "type",
          "coordinates"
        ]
      },
      "Post": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "category": {
            "$ref": "#/components/schemas/Category"
          },
          "location": {
            "$ref": "#/components/schemas/Point"
          },
          "status": {
            "type": "string",
            "enum": [
              "open",
              "in-progress",
              "completed"
            ],
            "example": "open"
          },
          "offersCount": {
            "type": "integer",
            "example": 0
          },
          "selectedOffer": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/SelectedOfferSummary"
              },
              {
                "type": "null"
              }
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PostListResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "total": {
            "type": "integer"
          },
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "totalPages": {
            "type": "integer"
          },
          "results": {
            "type": "integer"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Post"
            }
          }
        }
      },
      "PostResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/Post"
          }
        }
      },
      "ResetPasswordRequest": {
        "type": "object",
        "required": [
          "password",
          "passwordConfirm"
        ],
        "properties": {
          "password": {
            "type": "string",
            "format": "password",
            "example": "NewStrongP@ss123"
          },
          "passwordConfirm": {
            "type": "string",
            "format": "password",
            "example": "NewStrongP@ss123"
          }
        }
      },
      "Review": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "rating": {
            "type": "number",
            "minimum": 0,
            "maximum": 5
          },
          "review": {
            "type": "string"
          },
          "techService": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ReviewListResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "total": {
            "type": "integer"
          },
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "totalPages": {
            "type": "integer"
          },
          "results": {
            "type": "integer"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Review"
            }
          }
        }
      },
      "ReviewResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/Review"
          }
        }
      },
      "SelectedOfferSummary": {
        "type": "object",
        "description": "Subset of offer fields populated inside post.selectedOffer",
        "properties": {
          "price": {
            "type": "number",
            "example": 150
          },
          "technician": {
            "$ref": "#/components/schemas/UserSummary"
          }
        },
        "required": [
          "price",
          "technician"
        ]
      },
      "SendMessageRequest": {
        "type": "object",
        "required": [
          "conversationId",
          "author",
          "content"
        ],
        "properties": {
          "conversationId": {
            "type": "string"
          },
          "author": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "image"
            ],
            "default": "text"
          }
        }
      },
      "SignupRequest": {
        "type": "object",
        "required": [
          "name",
          "email",
          "password",
          "passwordConfirm"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Yousef Mohamed"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "yousef@example.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "StrongP@ss123"
          },
          "passwordConfirm": {
            "type": "string",
            "format": "password",
            "example": "StrongP@ss123"
          }
        }
      },
      "TechnicianArrayResponse": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/User"
        }
      },
      "TechService": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "minimum": 0
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          },
          "ratingsAverage": {
            "type": "number",
            "minimum": 1,
            "maximum": 5
          },
          "category": {
            "$ref": "#/components/schemas/Category"
          },
          "ratingsQuantity": {
            "type": "integer"
          },
          "availabity": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Availabity"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "TechServiceListResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "total": {
            "type": "integer"
          },
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "totalPages": {
            "type": "integer"
          },
          "results": {
            "type": "integer"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TechService"
            }
          }
        }
      },
      "TechServiceResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/TechService"
          }
        }
      },
      "UpdateCategoryRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "nameAr": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "descriptionAr": {
            "type": "string"
          },
          "image": {
            "type": "string",
            "format": "binary"
          }
        }
      },
      "UpdateMeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "image": {
            "type": "object",
            "properties": {
              "public_id": {
                "type": "string"
              },
              "url": {
                "type": "string"
              }
            }
          }
        }
      },
      "UpdateOfferRequest": {
        "type": "object",
        "properties": {
          "price": {
            "type": "number",
            "minimum": 0
          },
          "message": {
            "type": "string"
          }
        },
        "description": "At least one field must be provided"
      },
      "UpdatePasswordRequest": {
        "type": "object",
        "required": [
          "passwordCurrent",
          "password",
          "passwordConfirm"
        ],
        "properties": {
          "passwordCurrent": {
            "type": "string",
            "format": "password",
            "example": "OldP@ss123"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "NewP@ss123"
          },
          "passwordConfirm": {
            "type": "string",
            "format": "password",
            "example": "NewP@ss123"
          }
        }
      },
      "UpdatePastWorkRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 50
          },
          "description": {
            "type": "string",
            "minLength": 8,
            "maxLength": 500
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          },
          "location": {
            "$ref": "#/components/schemas/Point"
          },
          "dateCompleted": {
            "type": "string",
            "format": "date-time"
          },
          "customerName": {
            "type": "string"
          }
        },
        "description": "All fields optional; images replace existing set if provided"
      },
      "UpdatePostRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 5,
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "minLength": 5
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          },
          "existingImages": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "public_id of existing image"
            }
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 10
          },
          "category": {
            "type": "string"
          },
          "location": {
            "$ref": "#/components/schemas/Point"
          }
        },
        "description": "At least one of images or existingImages must be provided"
      },
      "UpdatePostStatusRequest": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "open",
              "in-progress",
              "completed"
            ]
          }
        }
      },
      "UpdateReviewRequest": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "number",
            "minimum": 0,
            "maximum": 5
          },
          "review": {
            "type": "string"
          },
          "techService": {
            "type": "string"
          },
          "user": {
            "type": "string"
          }
        },
        "description": "At least one field should be supplied"
      },
      "UpdateSelectedOfferRequest": {
        "type": "object",
        "required": [
          "selectedOffer"
        ],
        "properties": {
          "selectedOffer": {
            "type": "string"
          }
        }
      },
      "UpdateTechServiceRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 3,
            "maxLength": 30
          },
          "description": {
            "type": "string",
            "minLength": 5,
            "maxLength": 300
          },
          "price": {
            "type": "number",
            "minimum": 0
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            }
          },
          "category": {
            "type": "string"
          }
        },
        "description": "Provide at least one field to update"
      },
      "UpdateUserRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "technician",
              "admin"
            ]
          },
          "active": {
            "type": "boolean"
          },
          "totalEarning": {
            "type": "number"
          },
          "image": {
            "type": "object",
            "properties": {
              "public_id": {
                "type": "string"
              },
              "url": {
                "type": "string"
              }
            }
          },
          "address": {
            "$ref": "#/components/schemas/Point"
          },
          "rating": {
            "type": "number"
          }
        }
      },
      "UploadedImagesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Message"
            }
          }
        }
      },
      "UploadImagesRequest": {
        "type": "object",
        "required": [
          "author",
          "images"
        ],
        "properties": {
          "author": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ImageObject"
            },
            "minItems": 1
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "675f1a99c1b23cf1290af001"
          },
          "name": {
            "type": "string",
            "example": "Yousef Mohamed"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "yousef@example.com"
          },
          "role": {
            "type": "string",
            "example": "user"
          },
          "active": {
            "type": "boolean",
            "example": true
          },
          "totalEarning": {
            "type": "number",
            "example": 0
          },
          "image": {
            "type": "object",
            "properties": {
              "public_id": {
                "type": "string",
                "nullable": true
              },
              "url": {
                "type": "string",
                "nullable": true
              }
            }
          },
          "address": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "example": "Point"
              },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "example": [
                  31.2357,
                  30.0444
                ]
              }
            }
          },
          "rating": {
            "type": "number",
            "example": 4.5
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "UserEarnings": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "totalEarning": {
            "type": "number"
          },
          "rating": {
            "type": "number"
          }
        }
      },
      "UserSummary": {
        "type": "object",
        "description": "Subset of user fields returned via population (name & image)",
        "properties": {
          "_id": {
            "type": "string",
            "example": "675f1a99c1b23cf1290af001"
          },
          "name": {
            "type": "string",
            "example": "Yousef Mohamed"
          },
          "image": {
            "type": "object",
            "properties": {
              "public_id": {
                "type": "string",
                "nullable": true
              },
              "url": {
                "type": "string",
                "nullable": true
              }
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/auth/forgotPassword": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Forgot password",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token sent to email",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "message": {
                      "type": "string",
                      "example": "Token sent to email"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing email)"
          },
          "404": {
            "description": "Email not found"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logged in successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing email/password)"
          },
          "401": {
            "description": "Invalid email or password"
          }
        }
      }
    },
    "/auth/resetPassword/{token}": {
      "patch": {
        "tags": [
          "Authentication"
        ],
        "summary": "Reset password",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (password constraints)"
          },
          "401": {
            "description": "Invalid or expired reset token"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/auth/signup": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "User signup",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (e.g. weak password)"
          },
          "409": {
            "description": "Email already in use"
          }
        }
      }
    },
    "/auth/updateMyPassword": {
      "patch": {
        "tags": [
          "Authentication"
        ],
        "summary": "Update password for logged-in user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (password constraints)"
          },
          "401": {
            "description": "Invalid current password or not authenticated"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/admin/categories/{id}": {
      "delete": {
        "tags": [
          "Admin"
        ],
        "summary": "Delete a category",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Category not found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/admin/reviews/{id}": {
      "delete": {
        "tags": [
          "Admin"
        ],
        "summary": "Delete a review",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Review deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Review not found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/admin/reviews": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get all reviews",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of reviews",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewArrayResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/admin/stats/counts": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get user and technician counts",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Counts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CountsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/admin/stats/technician-demographics": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get technician demographics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Technician demographics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TechnicianDemographicsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/admin/stats/technicians-per-category": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get technicians per category",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Technicians per category",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TechniciansPerCategoryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/admin/stats/user-demographics": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get user demographics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User demographics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDemographicsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/user/deleteMe": {
      "delete": {
        "tags": [
          "User"
        ],
        "summary": "Soft delete current user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteMeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "User not found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/user": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get all active users",
        "security": [],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetAllUsersResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/user/{id}": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get user by ID",
        "security": [],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserByIdResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/user/reviews/{id}": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get reviews of a user",
        "security": [],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User reviews",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetMyReviewsResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/user/updateMe": {
      "patch": {
        "tags": [
          "User"
        ],
        "summary": "Update current user (name, email, image)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserByIdResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "User not found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/category": {
      "get": {
        "tags": [
          "Category"
        ],
        "summary": "Get all categories",
        "responses": {
          "200": {
            "description": "List of categories",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/category/{id}": {
      "patch": {
        "tags": [
          "Category"
        ],
        "summary": "Update a category",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategoryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid update fields)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Category not found"
          }
        }
      }
    },
    "/posts": {
      "get": {
        "tags": [
          "Post"
        ],
        "summary": "Get all posts",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of posts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          }
        }
      }
    },
    "/posts/{id}": {
      "patch": {
        "tags": [
          "Post"
        ],
        "summary": "Update a post by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePostRequest"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "New image files"
                  },
                  "existingImages": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "category": {
                    "type": "string"
                  },
                  "location": {
                    "$ref": "#/components/schemas/Point"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Post updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid update fields)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Post not found"
          }
        }
      }
    },
    "/posts/me": {
      "get": {
        "tags": [
          "Post"
        ],
        "summary": "Get authenticated user's posts",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of user's posts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          }
        }
      }
    },
    "/posts/{id}/select-offer": {
      "patch": {
        "tags": [
          "Post"
        ],
        "summary": "Select an offer for a post",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSelectedOfferRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Offer selected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing offerId or invalid state)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Post not found"
          }
        }
      }
    },
    "/posts/{id}/status": {
      "patch": {
        "tags": [
          "Post"
        ],
        "summary": "Update a post's status",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePostStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid status value)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Post not found"
          }
        }
      }
    },
    "/posts/{postId}/offers": {
      "get": {
        "tags": [
          "Offer"
        ],
        "summary": "Get all offers for a post",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of offers",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OfferListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Post not found"
          }
        }
      }
    },
    "/posts/{postId}/offers/{id}": {
      "patch": {
        "tags": [
          "Offer"
        ],
        "summary": "Update an offer by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOfferRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Offer updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OfferResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid update fields)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Offer not found"
          }
        }
      }
    },
    "/posts/{postId}/offers/did-make-offer": {
      "get": {
        "tags": [
          "Offer"
        ],
        "summary": "Check if authenticated technician already made an offer",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Check result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DidMakeOfferResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Post not found"
          }
        }
      }
    },
    "/reviews": {
      "get": {
        "tags": [
          "Review"
        ],
        "summary": "Get all reviews (public)",
        "security": [],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of reviews",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reviews/{id}": {
      "patch": {
        "tags": [
          "Review"
        ],
        "summary": "Update a review by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateReviewRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Review updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid update fields)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Review not found"
          }
        }
      }
    },
    "/tech-services/{id}/availabity": {
      "post": {
        "tags": [
          "TechService"
        ],
        "summary": "Add availability slots to tech service",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddAvailabilityRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Slots added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "day": {
                            "type": "string",
                            "format": "date"
                          },
                          "slots": {
                            "type": "array",
                            "items": {
                              "$ref": "#/components/schemas/AvailabilitySlot"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid availability slots)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Tech service not found"
          }
        }
      }
    },
    "/tech-services": {
      "get": {
        "tags": [
          "TechService"
        ],
        "summary": "Get all tech services",
        "security": [],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fields",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of tech services",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TechServiceListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tech-services/{id}": {
      "patch": {
        "tags": [
          "TechService"
        ],
        "summary": "Update tech service",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTechServiceRequest"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "price": {
                    "type": "number"
                  },
                  "category": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated tech service",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TechServiceResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid update fields)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/past-work": {
      "post": {
        "tags": [
          "PastWork"
        ],
        "summary": "Create a past work entry",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePastWorkRequest"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "userId": {
                    "type": "string"
                  },
                  "location": {
                    "$ref": "#/components/schemas/Point"
                  },
                  "dateCompleted": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "customerName": {
                    "type": "string"
                  }
                },
                "required": [
                  "title",
                  "description",
                  "images",
                  "userId"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Past work created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PastWorkResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing or invalid fields)"
          },
          "401": {
            "description": "Unauthorized: missing or invalid token"
          },
          "403": {
            "description": "Forbidden: insufficient permissions"
          }
        }
      }
    },
    "/past-work/{id}": {
      "patch": {
        "tags": [
          "PastWork"
        ],
        "summary": "Update past work by ID",
        "security": [],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePastWorkRequest"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "location": {
                    "$ref": "#/components/schemas/Point"
                  },
                  "dateCompleted": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "customerName": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Past work updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PastWorkResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid update fields)"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/chat": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Create or retrieve existing conversation",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateConversationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Conversation returned/created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conversation"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing participants)"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/chat/{messageId}": {
      "delete": {
        "tags": [
          "Chat"
        ],
        "summary": "Delete a message by ID",
        "security": [],
        "parameters": [
          {
            "name": "messageId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteMessageResponse"
                }
              }
            }
          },
          "404": {
            "description": "Message not found"
          },
          "500": {
            "description": "Failed to delete message"
          }
        }
      }
    },
    "/chat/{userId}": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Get conversations for a user",
        "security": [],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of conversations",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationListResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/chat/messages/{conversationId}": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Get messages in a conversation",
        "security": [],
        "parameters": [
          {
            "name": "conversationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of messages",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Conversation not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/chat/messages": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Send a message",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendMessageRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "404": {
            "description": "Conversation not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/chat/{conversationId}/upload": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Upload images as messages",
        "security": [],
        "parameters": [
          {
            "name": "conversationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "author": {
                    "type": "string"
                  }
                },
                "required": [
                  "images",
                  "author"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Images uploaded as messages",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadedImagesResponse"
                }
              }
            }
          },
          "400": {
            "description": "No images processed"
          },
          "404": {
            "description": "Conversation not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/chatbot": {
      "post": {
        "tags": [
          "Chatbot"
        ],
        "summary": "Get AI response for a conversation",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatbotRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI response returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatbotResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing message or conversationId)"
          },
          "503": {
            "description": "AI model unavailable"
          }
        }
      }
    }
  }
}
